<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>Chosen Demo Page</title>
    <link rel="stylesheet" href="/static/css/chosen.css" />
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" />
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<style>
.item {
border: 1px solid #666;
}
</style>
</head>
<body>
<form id="problem_form" class="form-horizontal">
<fieldset>
<ul id="result">
</ul>
<div class="contorl-group error">
<label class="control-label" for="pid">Problem ID</label>
<div class="controls">
<input type="text" class="input-xlarge" name="pid" id="pid" />
</div>
</div>
</fieldset>
<button type="submit" class="btn btn-primary" id="addpid">Add</a>
</form>
<script type="text/javascript">
$(document).ready(function () {
    $('#problem_form').ajaxError(function () {
        $('#pid').prop('disabled', false);
    });
    $('#problem_form').submit(function () {
        var val = $('#pid').val();
        if (val.search("^-?\\d+$") != 0) { 
            return false;
        }
        $.get('/api/problem/get/' + val, null, function(text) {
            $('#result').append('<li class="item">' + text + '<a class="close" data-dismiss="alert" href="#">&times;</a></li>');
            $('#problem_form').append('<input type="hidden" name="link_problem[]" value="' + val + '" />');
            $('#pid').val('');
            $('#pid').prop('disabled', false);
        });
        $('#pid').prop('disabled',true);
        return false;
    });
}); 
</script>
</body>
</html>

